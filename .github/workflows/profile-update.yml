# .github/workflows/profile-update.yml
name: 🚀 Refresh Profile Snake Animation

on:
  # Run automatically every 12 hours
  schedule:
    - cron: '0 */12 * * *'
  # Allow manual trigger from the Actions tab
  workflow_dispatch:
  # Also run on push to main branch
  push:
    branches:
      - main

jobs:
  generate-snake:
    name: 🐍 Generate Contribution Snake
    runs-on: ubuntu-latest
    steps:
      - name: 📥 Checkout Repository
        uses: actions/checkout@v4

      # This is the core step that generates the animation
      - name: 🎨 Generate Snake Animation SVG
        uses: Platane/snk/svg-only@v3
        with:
          # Your GitHub username
          github_user_name: ${{ github.repository_owner }}
          # Define the output files for both light and dark themes
          # The path here MUST match the path in your README.md
          outputs: |
            dist/github-snake.svg
            dist/github-snake-dark.svg?palette=github-dark

      # This step commits the newly generated file back to your repo
      - name: 🚀 Commit & Push Changes
        uses: EndBug/add-and-commit@v9
        with:
          # The branch to commit to
          branch: main
          # The user who will be credited for the commit
          author_name: 'GitHub Actions Bot'
          author_email: 'actions@github.com'
          # The commit message
          message: 'chore: 🐍 update contribution snake animation'
          # The specific files to add. 'dist' folder contains our snake SVGs.
          add: 'dist'
